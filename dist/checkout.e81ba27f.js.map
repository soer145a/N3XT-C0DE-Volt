{"version":3,"sources":["checkout.js"],"names":["window","addEventListener","init","cc","document","querySelector","paypal","mobilepay","ccText","ppText","mpText","classList","add","remove","checkButtons","getRestDB","console","log","fetch","method","headers","then","e","json","checkForCorrctUser","params","URL","location","searchParams","id","get","forEach","user","updateSummary","swapService","voltCharger","chargerTotal","swapServiceTotal","sum","textContent","charger","service","moms","updateUser","inputCcn","value","inputMonth","inputYear","inputccCvc","inputName","data","_id","total","firstName","lastName","email","country","zipCode","phoneNumber","password","ccNumber","ccYear","ccMonth","ccName","ccCvv","updateFunc","postData","JSON","stringify","body","d","t","newPage","assign","contains"],"mappings":"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","file":"checkout.e81ba27f.js","sourceRoot":"..","sourcesContent":["\"use strict\";\r\nwindow.addEventListener(\"DOMContentLoaded\", init);\r\n\r\nlet cc = document.querySelector(\"#cc\");\r\nlet paypal = document.querySelector(\"#paypal\");\r\nlet mobilepay = document.querySelector(\"#mobilepay\");\r\n\r\nlet ccText = document.querySelector(\"#cc-form\");\r\nlet ppText = document.querySelector(\"#paypal-text\");\r\nlet mpText = document.querySelector(\"#mobilepay-text\");\r\n\r\nfunction init() {\r\n  cc.addEventListener(\"click\", () => {\r\n    cc.classList.add(\"active\");\r\n    mobilepay.classList.remove(\"active\");\r\n    paypal.classList.remove(\"active\");\r\n    //\r\n    ccText.classList.add(\"opened\");\r\n    mpText.classList.remove(\"opened\");\r\n    ppText.classList.remove(\"opened\");\r\n    checkButtons();\r\n  });\r\n  paypal.addEventListener(\"click\", () => {\r\n    //Buttons\r\n    paypal.classList.add(\"active\");\r\n    cc.classList.remove(\"active\");\r\n    mobilepay.classList.remove(\"active\");\r\n\r\n    //Text Below\r\n    ppText.classList.add(\"opened\");\r\n    ccText.classList.remove(\"opened\");\r\n    mpText.classList.remove(\"opened\");\r\n    checkButtons();\r\n  });\r\n\r\n  mobilepay.addEventListener(\"click\", () => {\r\n    mobilepay.classList.add(\"active\");\r\n    cc.classList.remove(\"active\");\r\n    paypal.classList.remove(\"active\");\r\n    //\r\n    mpText.classList.add(\"opened\");\r\n    ppText.classList.remove(\"opened\");\r\n    ccText.classList.remove(\"opened\");\r\n    checkButtons();\r\n  });\r\n\r\n  getRestDB();\r\n}\r\n\r\nfunction getRestDB() {\r\n  console.log(\"GET\");\r\n  fetch(\"https://voltcustomers-f457.restdb.io/rest/customer-details\", {\r\n    method: \"get\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json; charset=utf-8\",\r\n      \"x-apikey\": \"5ca48775df5d634f46ecb225\",\r\n      \"cache-control\": \"no-cache\"\r\n    }\r\n  })\r\n    .then(e => e.json())\r\n    .then(e => checkForCorrctUser(e));\r\n}\r\n\r\nfunction checkForCorrctUser(e) {\r\n  let params = new URL(window.location).searchParams;\r\n  let id = params.get(\"id\");\r\n\r\n  e.forEach(user => {\r\n    if (user.id == id) {\r\n      updateSummary(user);\r\n    }\r\n  });\r\n}\r\n\r\nfunction updateSummary(user) {\r\n  console.log(user);\r\n  const swapService = 179;\r\n  const voltCharger = 200;\r\n  let chargerTotal = 1;\r\n  let swapServiceTotal = 1;\r\n  let sum;\r\n\r\n  document.querySelector(\"#productAmount1\").textContent = user.charger + \"x\";\r\n  document.querySelector(\"#productAmount2\").textContent = user.service + \"x\";\r\n  swapServiceTotal = user.service * swapService;\r\n  chargerTotal = user.charger * voltCharger;\r\n  document.querySelector(\"#priceSpan1\").textContent = swapServiceTotal;\r\n  document.querySelector(\"#priceSpan2\").textContent = chargerTotal;\r\n  let moms = ((swapServiceTotal + chargerTotal) / 100) * 25;\r\n  document.querySelector(\"#momsValue\").textContent = moms + \",- DKK\";\r\n  sum = moms + swapServiceTotal + chargerTotal;\r\n  document.querySelector(\"#totalValue\").textContent = sum;\r\n\r\n  document.querySelector(\"#complete-purchase\").addEventListener(\"click\", () => {\r\n    updateUser(user);\r\n  });\r\n}\r\n\r\nfunction updateUser(user) {\r\n  let inputCcn = document.querySelector(\"#ccNum\").value;\r\n  let inputMonth = document.querySelector(\"#ccMonth\").value;\r\n  let inputYear = document.querySelector(\"#ccYear\").value;\r\n  let inputccCvc = document.querySelector(\"#ccCvc\").value;\r\n  let inputName = document.querySelector(\"#ccName\").value;\r\n\r\n  const data = {\r\n    _id: user._id,\r\n    service: user.service,\r\n    id: user.id,\r\n    charger: user.charger,\r\n    total: user.total,\r\n    firstName: user.firstName,\r\n    lastName: user.lastName,\r\n    email: user.email,\r\n    country: \"-placeholder country-\",\r\n    zipCode: \"-placeholder zipCode\",\r\n    phoneNumber: user.phoneNumber,\r\n    password: user.password,\r\n    ccNumber: inputCcn,\r\n    ccYear: inputYear,\r\n    ccMonth: inputMonth,\r\n    ccName: inputName,\r\n    ccCvv: inputccCvc\r\n  };\r\n\r\n  updateFunc(data);\r\n}\r\n\r\nfunction updateFunc(data) {\r\n  console.log(\"Update\");\r\n  console.log(data);\r\n\r\n  let postData = JSON.stringify(data);\r\n\r\n  fetch(\r\n    \"https://voltcustomers-f457.restdb.io/rest/customer-details/\" + data._id,\r\n    {\r\n      method: \"put\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json; charset=utf-8\",\r\n        \"x-apikey\": \"5ca48775df5d634f46ecb225\",\r\n        \"cache-control\": \"no-cache\"\r\n      },\r\n      body: postData\r\n    }\r\n  )\r\n    .then(d => d.json())\r\n    .then(t => newPage());\r\n}\r\nfunction newPage() {\r\n  console.log(\"DONE\");\r\n  window.location.assign(\"thanks.html\");\r\n}\r\n\r\nfunction checkButtons() {\r\n  if (cc.classList.contains(\"active\") === true) {\r\n    paypal.classList.remove(\"active\");\r\n    mobilepay.classList.remove(\"active\");\r\n  } else if (paypal.classList.contains(\"active\") === true) {\r\n    cc.classList.remove(\"active\");\r\n    mobilepay.classList.remove(\"active\");\r\n  } else {\r\n    paypal.classList.remove(\"active\");\r\n    cc.classList.remove(\"active\");\r\n  }\r\n}\r\n"]}