{"version":3,"sources":["checkout.js"],"names":["window","addEventListener","init","cc","document","querySelector","paypal","mobilepay","ccText","ppText","mpText","classList","add","remove","checkButtons","getRestDB","console","log","fetch","method","headers","then","e","json","checkForCorrctUser","params","id","URL","location","searchParams","get","forEach","user","updateSummary","swapService","chargerTotal","swapServiceTotal","sum","textContent","charger","service","moms","updateUser","inputCcn","value","inputMonth","inputYear","inputccCvc","inputName","updateFunc","_id","total","firstName","lastName","email","country","zipCode","phoneNumber","password","ccNumber","ccYear","ccMonth","ccName","ccCvv","data","postData","JSON","stringify","body","d","t","newPage","assign","contains"],"mappings":"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","file":"checkout.182076a8.js","sourceRoot":"..","sourcesContent":["\"use strict\";\r\nwindow.addEventListener(\"DOMContentLoaded\", init);\r\n\r\nlet cc = document.querySelector(\"#cc\");\r\nlet paypal = document.querySelector(\"#paypal\");\r\nlet mobilepay = document.querySelector(\"#mobilepay\");\r\n\r\nlet ccText = document.querySelector(\"#cc-form\");\r\nlet ppText = document.querySelector(\"#paypal-text\");\r\nlet mpText = document.querySelector(\"#mobilepay-text\");\r\n\r\nfunction init() {\r\n  cc.addEventListener(\"click\", () => {\r\n    cc.classList.add(\"active\");\r\n    mobilepay.classList.remove(\"active\");\r\n    paypal.classList.remove(\"active\");\r\n    //\r\n    ccText.classList.add(\"opened\");\r\n    mpText.classList.remove(\"opened\");\r\n    ppText.classList.remove(\"opened\");\r\n    checkButtons();\r\n  });\r\n  paypal.addEventListener(\"click\", () => {\r\n    //Buttons\r\n    paypal.classList.add(\"active\");\r\n    cc.classList.remove(\"active\");\r\n    mobilepay.classList.remove(\"active\");\r\n\r\n    //Text Below\r\n    ppText.classList.add(\"opened\");\r\n    ccText.classList.remove(\"opened\");\r\n    mpText.classList.remove(\"opened\");\r\n    checkButtons();\r\n  });\r\n\r\n  mobilepay.addEventListener(\"click\", () => {\r\n    mobilepay.classList.add(\"active\");\r\n    cc.classList.remove(\"active\");\r\n    paypal.classList.remove(\"active\");\r\n    //\r\n    mpText.classList.add(\"opened\");\r\n    ppText.classList.remove(\"opened\");\r\n    ccText.classList.remove(\"opened\");\r\n    checkButtons();\r\n  });\r\n\r\n  getRestDB();\r\n}\r\n\r\nfunction getRestDB() {\r\n  console.log(\"GET\");\r\n  fetch(\"https://voltcustomers-f457.restdb.io/rest/customer-details\", {\r\n    method: \"get\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json; charset=utf-8\",\r\n      \"x-apikey\": \"5ca48775df5d634f46ecb225\",\r\n      \"cache-control\": \"no-cache\"\r\n    }\r\n  })\r\n    .then(e => e.json())\r\n    .then(e => checkForCorrctUser(e));\r\n}\r\n\r\nfunction checkForCorrctUser(e) {\r\n  let params = new URL(window.location).searchParams;\r\n  let id = params.get(\"id\");\r\n\r\n  e.forEach(user => {\r\n    if (user.id == id) {\r\n      updateSummary(user);\r\n    }\r\n  });\r\n}\r\n\r\nfunction updateSummary(user) {\r\n  console.log(user);\r\n  const swapService = 179;\r\n  const voltCharger = 200;\r\n  let chargerTotal = 1;\r\n  let swapServiceTotal = 1;\r\n  let sum;\r\n\r\n  document.querySelector(\"#productAmount1\").textContent = user.charger + \"x\";\r\n  document.querySelector(\"#productAmount2\").textContent = user.service + \"x\";\r\n  swapServiceTotal = user.service * swapService;\r\n  chargerTotal = user.charger * voltCharger;\r\n  document.querySelector(\"#priceSpan1\").textContent = swapServiceTotal;\r\n  document.querySelector(\"#priceSpan2\").textContent = chargerTotal;\r\n  let moms = ((swapServiceTotal + chargerTotal) / 100) * 25;\r\n  document.querySelector(\"#momsValue\").textContent = moms + \",- DKK\";\r\n  sum = moms + swapServiceTotal + chargerTotal;\r\n  document.querySelector(\"#totalValue\").textContent = sum;\r\n\r\n  document.querySelector(\"#complete-purchase\").addEventListener(\"click\", () => {\r\n    updateUser(user);\r\n  });\r\n}\r\n\r\nfunction updateUser(user) {\r\n  let inputCcn = document.querySelector(\"#ccNum\").value;\r\n  let inputMonth = document.querySelector(\"#ccMonth\").value;\r\n  let inputYear = document.querySelector(\"#ccYear\").value;\r\n  let inputccCvc = document.querySelector(\"#ccCvc\").value;\r\n  let inputName = document.querySelector(\"#ccName\").value;\r\n\r\n  const data = {\r\n    _id: user._id,\r\n    service: user.service,\r\n    id: user.id,\r\n    charger: user.charger,\r\n    total: user.total,\r\n    firstName: user.firstName,\r\n    lastName: user.lastName,\r\n    email: user.email,\r\n    country: \"-placeholder country-\",\r\n    zipCode: \"-placeholder zipCode\",\r\n    phoneNumber: user.phoneNumber,\r\n    password: user.password,\r\n    ccNumber: inputCcn,\r\n    ccYear: inputYear,\r\n    ccMonth: inputMonth,\r\n    ccName: inputName,\r\n    ccCvv: inputccCvc\r\n  };\r\n\r\n  updateFunc(data);\r\n}\r\n\r\nfunction updateFunc(data) {\r\n  console.log(\"Update\");\r\n  console.log(data);\r\n\r\n  let postData = JSON.stringify(data);\r\n\r\n  fetch(\r\n    \"https://voltcustomers-f457.restdb.io/rest/customer-details/\" + data._id,\r\n    {\r\n      method: \"put\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json; charset=utf-8\",\r\n        \"x-apikey\": \"5ca48775df5d634f46ecb225\",\r\n        \"cache-control\": \"no-cache\"\r\n      },\r\n      body: postData\r\n    }\r\n  )\r\n    .then(d => d.json())\r\n    .then(t => newPage());\r\n}\r\nfunction newPage() {\r\n  console.log(\"DONE\");\r\n  window.location.assign(\"thanks.html\");\r\n}\r\n\r\nfunction checkButtons() {\r\n  if (cc.classList.contains(\"active\") === true) {\r\n    paypal.classList.remove(\"active\");\r\n    mobilepay.classList.remove(\"active\");\r\n  } else if (paypal.classList.contains(\"active\") === true) {\r\n    cc.classList.remove(\"active\");\r\n    mobilepay.classList.remove(\"active\");\r\n  } else {\r\n    paypal.classList.remove(\"active\");\r\n    cc.classList.remove(\"active\");\r\n  }\r\n}\r\n"]}